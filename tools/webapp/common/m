#!/bin/bash

CSSDIR=src/css2

DEFAULT=webapp-cetelem.css
#DEFAULT=webapp-grey.css
#DEFAULT=webapp-olivedrab.css
#DEFAULT=webapp-orange.css
#DEFAULT=webapp-seagreen.css
#DEFAULT=webapp-slateblue.css
#DEFAULT=webapp-tomato.css





rm -f *.gz

# megjegyes: webapp.js.gz, webapp.css.gz 
# Ezek a gz fajlok automatikusan letrejonnek,
# es amig leteznek, a szerver mindig azokat kuldi,
# tehat a valtozasok ervenyre jutasahoz torolni kell.

rm -f webapp.js
touch webapp.js

cat   src/javascript/webapp-core.js         >>webapp.js
cat   src/javascript/webapp-websocket.js    >>webapp.js
cat   src/javascript/webapp-formdata.js     >>webapp.js
cat   src/javascript/webapp-private.js      >>webapp.js
cat   src/javascript/webapp-xlib.js         >>webapp.js
cat   src/javascript/webapp-util.js         >>webapp.js
cat   src/javascript/webapp-alert.js        >>webapp.js
cat   src/javascript/webapp-inp_date.js     >>webapp.js
cat   src/javascript/webapp-inp_number.js   >>webapp.js
cat   src/javascript/webapp-inp_picture.js  >>webapp.js
cat   src/javascript/webapp-inp_regex.js    >>webapp.js
cat   src/javascript/webapp-compat.js       >>webapp.js
cat   src/javascript/webapp-md5.js          >>webapp.js
cat   src/javascript/webapp-password.js     >>webapp.js



pushd $CSSDIR >/dev/null
for COLORS in colors-*.less; do
    cp $COLORS colors.less
    COLORS=$(echo $COLORS | sed s^colors-^^ )
    COLORS=$(echo $COLORS | sed s^.less^^ )
    lessc webapp.less >webapp-$COLORS.css
done
rm colors.less
popd >/dev/null

cp -p $CSSDIR/$DEFAULT  webapp.css  #ez a default



# minify --no-comments webapp.js
# minify --no-comments webapp.css
#
# mv webapp.min.js  webapp.js 
# mv webapp.min.css webapp.css 

